const basketGiftsLiterals={added:"Wybrany prezent został dodany do zamówienia",removed:"Wybrany prezent został usunięty z zamówienia"},BasketGifts=function(e){const t=document.querySelector(e.products)||document.createElement("div"),s=e.product||".basketGifts__products.--enable .basketGifts__product",i=e.options||".basketGifts__options.--enable",a=document.querySelector(e.products)||document.querySelector(".basketGifts__products.--enable"),r=document.querySelector(e.options)||document.createElement("div"),l=e.productsInSlider||6,o=r.querySelectorAll('a[href="#basketGiftAll"]'),n=t.querySelectorAll('a[href="#basketGiftsAdd"]'),c=t.querySelectorAll('a[href="#basketGiftsRemove"]'),d=t.querySelectorAll(".basketProducts__sizes select"),u=e.view||4;this.sliderOptions=e.sliderOptions||{options:{loop:!1,autoHeight:!1,navigation:{nextEl:`${i} .basketGifts__arrow.--next`,prevEl:`${i} .basketGifts__arrow.--prev`},spaceBetween:30,slidesPerView:l}};const p=e.changeViewCall?e.changeViewCall:()=>{},f=e.setGiftCall?e.setGiftCall:()=>{},h=e.removeGiftCall?e.removeGiftCall:()=>{};this.getSlider=()=>t.classList.contains("--slider")&&4===u,this.removeSlider=()=>this.slider?.destroy(!0,!0),this.setSlider=async()=>{const{Slider:e}=await appModules.load("Slider");if(!e)return void app_shop.vars.utils.debug("Gifts","(async) setupSlider","Pobierany moduł [Slider] nie istnieje");this.slider=new e;if(!await this.slider.init(this.sliderOptions))return void app_shop.vars.utils.debug("Gifts","(async) setupSlider","Nie udało się zainicjalizować slidera.");this.slider.watchEvent("fromEdge toEdge afterInit lock unlock",(()=>{this.slider?.slider?.navigation?.prevEl?.setAttribute?.("tabindex",-1),this.slider?.slider?.navigation?.nextEl?.setAttribute?.("tabindex",-1)}));await this.slider.setupSlider({element:a})||app_shop.vars.utils.debug("Gifts","(async) setupSlider","Nie udało się zainstalować slidera na stronie.")},this.formDataUpdate=(e,t)=>{e.querySelectorAll(".gift_input").forEach((e=>{e.classList.contains("gift_quantity")&&(e.value=t);const s=document.querySelector(`.basket__form input[class="${e.getAttribute("class")}"]`);if(!s)return!1;s.value=e.value,s.removeAttribute("disabled")}))},this.setGift=e=>{document.querySelectorAll(s).forEach((e=>{e.classList.remove("--active")})),e.closest(s).classList.add("--active"),this.formDataUpdate(e.closest(s),1)},this.removeGift=e=>{e.closest(s).classList.remove("--active"),this.formDataUpdate(e.closest(s),0)},this.changeView=()=>{t.classList.remove("--slider"),this.removeSlider()},this.sendForm=async e=>{e.closest(".basketGifts")?.classList?.add("--loading"),app_shop.vars.lastFocusedElement=".basketGifts",await app_shop.fn.basket.reloadForm(),e.closest(".basketGifts")?.classList?.remove("--loading")},this.setEvents=()=>{o.forEach((e=>{e?.addEventListener("click",(()=>{this.changeView(),p(e),t.querySelector("a")?.focus?.()}))})),n.forEach((e=>{e?.addEventListener("click",(async t=>{this.setGift(e),f(e),await this.sendForm(e),Alertek.Success(basketGiftsLiterals.added)}))})),d.forEach((e=>{e?.addEventListener("change",(async()=>{e.parentNode.querySelector(".gift_size").value=e.value,e.closest(".--active")&&(this.setGift(e),await this.sendForm(e),Alertek.Success(basketGiftsLiterals.added)),f(e)}))})),c.forEach((e=>{e?.addEventListener("click",(async t=>{this.removeGift(e),h(e),await this.sendForm(e),Alertek.Success(basketGiftsLiterals.removed)}))}))},this.init=async()=>{this.getSlider()?this.setSlider():this.changeView(),this.setEvents()}};app_shop.run((function(){try{const e=e=>({products:`.basketGifts__products.--${e}`,product:`.basketGifts__products.--${e} .basketGifts__product`,options:`.basketGifts__options.--${e}`,productsInSlider:4,view:app_shop.vars.view});app_shop.fn.basketGiftsEnable=new BasketGifts(e("enable")),app_shop.fn.basketGiftsEnable.init(),app_shop.fn.basketGiftsDisable=new BasketGifts(e("disabled")),app_shop.fn.basketGiftsDisable.init()}catch(e){window?.errorLog?.(e)}}),"all",".basketGifts",!0);