app_shop.txt.affiliateCodeDefaultText="Kliknij, aby aktywowaÄ‡ kod: %s",app_shop.txt.affiliateCodeCopied="Skopiowano kod rabatowy";const developButton=document.querySelector(".affiliate__button.--develop");developButton&&developButton.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".affiliate__form.--code");t&&("block"!==t.style.display?t.style.display="block":t.style.display="")}));const tooltipTrigger=document.querySelectorAll(".affiliate__tooltip.--trigger");tooltipTrigger.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),e.parentNode.classList.toggle("--show-tooltip")}))})),document.addEventListener("click",(({target:e})=>{document.querySelector(".affiliate__tooltip.--show-tooltip")&&(e.closest(".affiliate__tooltip.--show-tooltip")||document.querySelector(".affiliate__tooltip.--show-tooltip").classList.remove("--show-tooltip"))})),document.addEventListener("focusin",(({target:e})=>{document.querySelector(".affiliate__tooltip.--show-tooltip")&&(e.closest(".affiliate__tooltip.--show-tooltip")||document.querySelector(".affiliate__tooltip.--show-tooltip").classList.remove("--show-tooltip"))}));const promoCodes=document.querySelectorAll(".affiliate__promo:not(.--info)");promoCodes&&promoCodes.forEach((e=>{e.addEventListener("click",(async t=>{const o=e.querySelector(".affiliate__code");if(!o.textContent)return;const r=o.textContent;try{await navigator.clipboard.writeText(r),Alertek.Success(app_shop.txt.affiliateCodeCopied)}catch(t){}}))}));const showHideCode=e=>{document.querySelectorAll(".rebates_active__wrapper").forEach((e=>{e.classList.remove("d-sm-flex"),e.classList.add("d-none")})),e&&(e.classList.remove("d-none"),e.classList.add("d-sm-flex"));const t=document.querySelector(".affiliate__info.--no_code");t&&(t.style.display=e?"none":"");const o=document.querySelector(".rebates_active");if(!o)return;let r=o.parentNode.nextElementSibling;for(;r;)r.style.display=e?"":"none",r=r.nextElementSibling},activeRebateToggler=()=>{const e=document.querySelector('[name="promo_codes_shop"]');if(!e)return;const t=document.querySelector('[name="promo_codes_code"]');if(!t)return;const o=e.value,r=t.value,l=document.querySelector(`.rebates_active__wrapper[data-shops*="${o}"][data-code="${r}"]`);showHideCode(l);const a=document.getElementById("promo_code_text");a&&(a.value=app_shop.txt.affiliateCodeDefaultText.replace("%s",r))},getData=()=>({style:document.querySelector('[name="promo_code_radio"]:checked')?.value?.split?.("-"),text:document.querySelector("#promo_code_text")?.value,size:document.querySelector("#promo_code_text_size")?.value,textColor:document.querySelector("#color3")?.value,bold:!!document.querySelector("#nazwa_bold:checked"),radius:!!document.querySelector("#nazwa_radius:checked"),iconColor:document.querySelector("#color4")?.value,bgColor:document.querySelector("#color5")?.value,icon:document.querySelector('[name="ikona"]:checked + label i')?.className}),generateCodeButton=()=>{const e=document.querySelector(".affiliate__preview");if(!e)return;const{style:t,text:o,size:r,textColor:l,bold:a,radius:c,iconColor:n,bgColor:i,icon:d}={...getData()},s=`<a href="#code" style="${`display: inline-block; font-size: ${r}px; color: ${l}; ${a?"font-weight: 700;":""} ${c?"border-radius: 5px;":""} ${"1"===t[0]?" background: "+i+"; padding: 9px 10px; text-align:center; text-decoration:none;":""}`}">${""+("1"===t[1]?'<i class="'+d+'" style="color: '+n+'; margin-right: 15px;"></i>':"")}${o}</a>`;return e.innerHTML=s,s},generateLink=()=>{const e=document.querySelector('[name="promo_codes_shop"]');if(!e)return!1;const t=document.querySelector('[name="promo_codes_code"]');if(!t)return!1;return`http://${e.value}/settings.php?from=client_rebate&global_rebates_codes=add&rebate_codes=${t.value}`};app_shop.run((function(){app_shop.fn.affiliateCodeSelects=new SelectToDropdown({selector:".affiliate.--code .f-select:not(.f-dropdown)",afterClickDropdownCallback:()=>{activeRebateToggler()}}),activeRebateToggler()}),"all",".affiliate.--code .f-select"),app_shop.run((function(){const e=document.querySelector(".affiliate__button.--previewCode");e&&e.addEventListener("click",(e=>{e.preventDefault(),generateCodeButton()}));const t=document.querySelector('textarea[name="output"]');if(!t)return;const o=document.querySelector(".affiliate__button.--generateCode");o&&o.addEventListener("click",(e=>{e.preventDefault();const o=generateCodeButton();o&&(t.innerHTML=o)}));const r=document.querySelector(".affiliate__button.--generateUrl");o&&r.addEventListener("click",(e=>{e.preventDefault();const o=generateLink();o&&(t.innerHTML=o)}))}),"all",".affiliate.--code");