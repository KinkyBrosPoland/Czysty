app_shop.run((()=>{app_shop.fn.instagram=new function(t){const e={containerWrapper:document.querySelector("#instagram.--main"),slider:document.querySelector("#instagram.--main").classList.contains("--slider")},i="object"==typeof t?t:e,r=i.containerWrapper.querySelector(".instagram__slider.swiper");this.numberOfElements=i.containerWrapper.getAttribute("numberOfElements"),this.literals={"Materiał z instagrama":"Materiał z instagrama","film numer":"film numer","zdjęcie numer":"zdjęcie numer"},this.queryGraphQL={query:`query {\n\t\t\t\t\tinstagram(numberOfElements: ${this.numberOfElements}) {\n\t\t\t\t\t\tmedia {\n\t\t\t\t\t\t\tdirectUrl,\n\t\t\t\t\t\t\tsiteUrl,\n\t\t\t\t\t\t\tmediaType\n\t\t\t\t\t\t\tcaption\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}`};const n=async()=>{if(i.containerWrapper.classList.add("load-content"),sessionStorage.getItem("instagram_widget"))return JSON.parse(sessionStorage.getItem("instagram_widget"));try{const t=await fetch("/graphql/v1/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(this.queryGraphQL)}),e=await t.json();return sessionStorage.setItem("instagram_widget",JSON.stringify(e)),e}catch(t){return!1}};this.removeSkeleton=()=>{i.containerWrapper.classList.remove("load-content"),i.containerWrapper.classList.remove("--skeleton")},this.getInstagramTitle=({description:t,index:e,type:i})=>{const r="movie"===i?this.literals["film numer"]:this.literals["zdjęcie numer"];return`${this.literals["Materiał z instagrama"]}: ${r} ${e} ${t?` - ${t}`:""}`},this.createItemImg=({link:t,src:e,index:r,description:n})=>{const s=this.getInstagramTitle({description:n,index:r+1,type:"image"});return`<div class="instagram__item swiper-slide --img">\n\t\t\t\t\t<a href="${t}" target="blank" title="${s}">\n\t\t\t\t\t\t<img loading="lazy" src="${e}" alt="${s}" width="269" height="358">\n\t\t\t\t\t\t${i.slider?'<div class="swiper-lazy-preloader"></div>':""}\n\t\t\t\t\t</a>\n\t\t\t\t</div>`},this.createItemVideo=({link:t,src:e,index:i,description:r,autoplay:n})=>{const s="string"!=typeof e||e.includes("#")?e:`${e}#t=0.1`,a=this.getInstagramTitle({description:r,index:i+1,type:"movie"});return`<div class="instagram__item swiper-slide --video">\n\t\t\t\t\t<a href="${t}" target="blank" title="${a}">\n\t\t\t\t\t\t<video controls ${n?"autoplay":""} muted preload="metadata" playsinline title="${a}">\n\t\t\t\t\t\t\t<source src="${s}"></source>\n\t\t\t\t\t\t</video>\n\t\t\t\t\t</a>\n\t\t\t\t</div>`},this.createWidget=t=>{const e=t?t.data.instagram.media:void 0;if(null==e||0===e.length)return i.containerWrapper.remove(),!1;let r="",n=!1;e.forEach(((t,e)=>{"VIDEO"===t.mediaType?(r+=this.createItemVideo({link:t.siteUrl,index:e,description:t.caption,src:t.directUrl,autoplay:n}),n=!1):r+=this.createItemImg({link:t.siteUrl,index:e,description:t.caption,src:t.directUrl})})),i.containerWrapper.querySelector(".instagram__items.swiper-wrapper").innerHTML=r},this.setupSlider=async()=>{const{Slider:t}=await appModules.load("Slider");if(!t)return;const e=new t;if(!await e.init({options:{loop:!1,navigation:{nextEl:"#instagram.--slider .swiper-button-next",prevEl:"#instagram.--slider .swiper-button-prev"},grabCursor:!1,autoHeight:!1,spaceBetween:16,slidesPerView:1.4,centeredSlides:!0,centeredSlidesBounds:!0,breakpoints:{550:{slidesPerView:1.8,centeredSlides:!0,centeredSlidesBounds:!0},979:{slidesPerView:4,centeredSlides:!1,centeredSlidesBounds:!1}}}}))return;e.enableA11y({scrollOnFocus:!1}),e.watchEvent("afterInit",(()=>{this.removeSkeleton()}));await e.setupSlider({element:r})},this.instagramObserverFunc=t=>{t.forEach((t=>!!t.isIntersecting&&(t.target===i.containerWrapper&&(this.instagramObserver.unobserve(t.target),this.getWidget()),!0)))},this.instagramObserverInit=()=>{this.instagramObserver=new IntersectionObserver((t=>{this.instagramObserverFunc(t)})),this.instagramObserver.observe(i.containerWrapper)},this.getWidget=async()=>{await n().then((t=>{this.createWidget(t),!i.slider&&this.removeSkeleton(),i.slider&&this.setupSlider()}))}}({containerWrapper:document.querySelector("#instagram.--main"),slider:document.querySelector("#instagram.--main").classList.contains("--slider")}),app_shop.fn.instagram.instagramObserverInit()}),"all","#instagram.--main");