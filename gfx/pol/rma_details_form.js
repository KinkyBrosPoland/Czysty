const preferedFormComplainTxt="Preferowana forma reklamacji",fetchRMAMessages=async()=>{document.querySelector(".rma_questions").classList.add("load-content");try{await fetch(window.location.href).then((e=>e.text())).then((e=>{const t=(new DOMParser).parseFromString(e,"text/html");document.querySelector(".rma_questions").innerHTML=t.querySelector(".rma_questions").innerHTML,document.querySelector(".rma_questions").classList.remove("load-content")}))}catch(e){throw new Error(e)}},sendComplaintMethod=async()=>{if(null!==localStorage.getItem("complaint_method")){const e=new FormData;e.append("comment",`${preferedFormComplainTxt}: ${localStorage.getItem("complaint_method")}`);try{await fetch(`${window.location.href}&message=rma`,{method:"POST",body:e}),fetchRMAMessages(),localStorage.removeItem("complaint_method")}catch(e){throw new Error(e)}}};app_shop.run((()=>{app_shop.fn.rmaDetailsFormValidation=new FormValidation({form:document.querySelector("form.rma_added_files")}),app_shop.fn.rmaDetailsFormValidation.init()}),"all","form.rma_added_files"),app_shop.run((()=>{sendComplaintMethod();document.querySelector(".step_confirmation").addEventListener("click",(e=>{const{target:t}=e;if(t.closest(".rma_af_addMoreAttachments")){e.preventDefault();const t=document.querySelector(".rma_af_foto input").cloneNode(!0);return t.value="",void document.querySelector(".rma_af_foto").insertAdjacentElement("beforeend",t)}if(t.closest("a.rma_attach_file")){e.preventDefault();const o=t.closest("form").querySelector("div.rma_af_files");o&&(o.style.display="block"),o.querySelector('input[type="file"]')?.focus(),t.closest("a.rma_attach_file").style.display="none"}}))}),"all",".step_confirmation");